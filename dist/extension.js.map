{
  "version": 3,
  "sources": ["../src/extension.js"],
  "sourcesContent": ["\"use strict\";\n\n// loader-code: wait until gmailjs has finished loading, before triggering actual extensiode-code.\nconst loaderId = setInterval(() => {\n    if (!window._gmailjs) {\n        return;\n    }\n\n    clearInterval(loaderId);\n    startExtension(window._gmailjs);\n}, 100);\n\n// actual extension-code\nfunction startExtension(gmail) {\n    console.log(\"Extension loading...\");\n    window.gmail = gmail;\n\n    gmail.observe.on(\"load\", () => {\n        const userEmail = gmail.get.user_email();\n        console.log(\"Hello, \" + userEmail + \". This is your extension talking!\");\n\n        /* event listener when an email is viewed */\n        gmail.observe.on(\"view_email\", onViewEmail);\n\n        /* event listener for compose email */\n        gmail.observe.on(\"compose\", (compose) => {\n            console.log(\"New compose window is opened!\", compose);\n        });\n    });\n}\n\n/* function that is invoked when an email is viewed */\nfunction onViewEmail(domEmail){\n    const emailData = gmail.new.get.email_data(domEmail);\n    console.log(\"Email data:\", emailData);\n    const emailRec = getEmail(emailData.content_html)\n}\n\n/* this function calls the back-end llm code */\nfunction getEmail(contentHtml){\n    console.log('getting response from llm');\n    const user_question_encoded = encodeURIComponent(contentHtml)\n    fetch(\"http://127.0.0.1:8000/process?data_request=\" + user_question_encoded)\n    .then(response =>  response.json())\n    .then((data) => {\n      console.log(\"Data: \", data.response);\n      /* TODO: to place the data into the browser extension here */ \n    })\n    .catch((error) => {\n      console.error('Fetch Error:', error);\n  });\n}"],
  "mappings": ";;;AAGA,MAAM,WAAW,YAAY,MAAM;AAC/B,QAAI,CAAC,OAAO,UAAU;AAClB;AAAA,IACJ;AAEA,kBAAc,QAAQ;AACtB,mBAAe,OAAO,QAAQ;AAAA,EAClC,GAAG,GAAG;AAGN,WAAS,eAAeA,QAAO;AAC3B,YAAQ,IAAI,sBAAsB;AAClC,WAAO,QAAQA;AAEf,IAAAA,OAAM,QAAQ,GAAG,QAAQ,MAAM;AAC3B,YAAM,YAAYA,OAAM,IAAI,WAAW;AACvC,cAAQ,IAAI,YAAY,YAAY,mCAAmC;AAGvE,MAAAA,OAAM,QAAQ,GAAG,cAAc,WAAW;AAG1C,MAAAA,OAAM,QAAQ,GAAG,WAAW,CAAC,YAAY;AACrC,gBAAQ,IAAI,iCAAiC,OAAO;AAAA,MACxD,CAAC;AAAA,IACL,CAAC;AAAA,EACL;AAGA,WAAS,YAAY,UAAS;AAC1B,UAAM,YAAY,MAAM,IAAI,IAAI,WAAW,QAAQ;AACnD,YAAQ,IAAI,eAAe,SAAS;AACpC,UAAM,WAAW,SAAS,UAAU,YAAY;AAAA,EACpD;AAGA,WAAS,SAAS,aAAY;AAC1B,YAAQ,IAAI,2BAA2B;AACvC,UAAM,wBAAwB,mBAAmB,WAAW;AAC5D,UAAM,gDAAgD,qBAAqB,EAC1E,KAAK,cAAa,SAAS,KAAK,CAAC,EACjC,KAAK,CAAC,SAAS;AACd,cAAQ,IAAI,UAAU,KAAK,QAAQ;AAAA,IAErC,CAAC,EACA,MAAM,CAAC,UAAU;AAChB,cAAQ,MAAM,gBAAgB,KAAK;AAAA,IACvC,CAAC;AAAA,EACH;",
  "names": ["gmail"]
}
